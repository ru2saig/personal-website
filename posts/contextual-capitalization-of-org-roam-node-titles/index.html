<!DOCTYPE html>
<html prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Contextual-Capitalization of Org-Roam Node Titles | ru2saig</title>
<link href="../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/index.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/custom.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://ru2saig.github.io/posts/contextual-capitalization-of-org-roam-node-titles/">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&amp;display=swap" rel="stylesheet">
<link rel="/icon" href="//favicon.ico" sizes="32x32">
<!--[if lt IE 9]><script src="../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><meta name="author" content="ru2saig">
<link rel="next" href="../setting-up-usb-ethernet-network-connection-bw-beaglebone-and-linux/" title="Setting up USB-Ethernet Network Connection between BeagleBone Boards and Desktop Linux" type="text/html">
<meta property="og:site_name" content="ru2saig">
<meta property="og:title" content="Contextual-Capitalization of Org-Roam Node Titles">
<meta property="og:url" content="https://ru2saig.github.io/posts/contextual-capitalization-of-org-roam-node-titles/">
<meta property="og:description" content="I extensively use Emacs, Org-Mode and Org-Roam for managing my knowledge, in the form a personal wiki. I use the Zettelkasten Method for making the entries, but instead of explicitly noting the ID, I ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-07-08T17:44:57+05:30">
<meta property="article:tag" content="elisp">
<meta property="article:tag" content="emacs">
<meta property="article:tag" content="org-mode">
<meta property="article:tag" content="org-roam">
<meta property="article:tag" content="tips">
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
    <input id="dark-mode" type="checkbox"><div class="theme">
        <div class="layout">
              <header class="cover"><h1 id="brand" class="cover__title">
<a href="../../" title="ru2saig" rel="home">
      <span id="blog-title">ru2saig</span>
  </a>
  <label class="dark-mode-label hover:dark-mode-label" for="dark-mode">
    <?xml version="1.0" encoding="UTF-8" standalone="no"?><!-- Generator: Gravit.io --><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation: isolate;" viewbox="0 0 416 416" width="30px" height="30px"><defs><clippath id="_clipPath_qEPwrMg7OPn6mDBNPkG6Nqc7qffgU4IC"><rect width="416" height="416"></rect></clippath></defs><g clip-path="url(#_clipPath_qEPwrMg7OPn6mDBNPkG6Nqc7qffgU4IC)"><path d=" M 304 88 C 304 57.38 299.49 26.39 288 0 C 364.43 33.27 416 111.32 416 200 C 416 319.29 319.29 416 200 416 C 111.32 416 33.27 364.43 0 288 C 26.39 299.49 57.38 304 88 304 C 207.29 304 304 207.29 304 88 Z "></path></g></svg></label>

  </h1>
  <span id="blog-desc">Monkeying around 'till I type out Shakespeare</span>

       <div>
     <nav class="nav-menu"><ul class="navigation">
<li><a href="../../">braindump</a></li>
                <li><a href="../../stuff/">stuff</a></li>
                <li><a href="../../rss.xml">feed</a></li>

	 
	 
	 
       </ul></nav>
</div>


  </header><main id="content" class="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title header__title" itemprop="headline name">Contextual-Capitalization of Org-Roam Node Titles</h1>

        <div class="metadata">
            <span class="byline author vcard p-author h-card">
		Tags:
            </span>
                <a class="tag p-category article__meta__link hover:article__meta__link" href="../../categories/elisp/" rel="tag">#elisp </a>
                <a class="tag p-category article__meta__link hover:article__meta__link" href="../../categories/emacs/" rel="tag">#emacs </a>
                <a class="tag p-category article__meta__link hover:article__meta__link" href="../../categories/org-mode/" rel="tag">#org-mode </a>
                <a class="tag p-category article__meta__link hover:article__meta__link" href="../../categories/org-roam/" rel="tag">#org-roam </a>
                <a class="tag p-category article__meta__link hover:article__meta__link" href="../../categories/tips/" rel="tag">#tips </a>
            <span class="dateline">
              | <a class="article__meta__link hover:article__meta__link" href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-07-08T17:44:57+05:30" itemprop="datePublished" title="08-Jul-2023">08-Jul-2023</time></a>
            </span>
                    | <span class="sourceline"><a class="article__meta__link hover:article__meta__link" href="index.org">Source</a></span>

        </div>
        
    </header><section class="e-content entry-content" itemprop="articleBody text"><p>
I extensively use Emacs, Org-Mode and <a href="https://www.orgroam.com/">Org-Roam</a> for managing my knowledge, in the form a personal wiki. I use the <a href="https://zettelkasten.de/introduction/">Zettelkasten Method</a> for making the entries, but instead of explicitly noting the ID, I like inserting the titles of the nodes instead, like a page from <a href="https://en.wikipedia.org/wiki/Cosmic_latte">Wikipedia</a> or this blog post itself as an example! (Of course, the links are relevant to the topic of the note)
<br><br>
But there I have a gripe; the titles are inserted as they are, which makes the link not so aesthetic. (e.g.) "Given a Matrix …". I did not like reading that. So I spent some time making such a sentence into "Given a matrix …". I describe in this post (more of an article) how I arrived at a workable solution. 
</p>
<div id="outline-container-org9e9ee24" class="outline-2">
<h2 id="org9e9ee24">Requirements</h2>
<div class="outline-text-2" id="text-org9e9ee24">
<p>
First, how do I like my links? The first step is setting requirements for the end approach.
</p>
<ul class="org-ul">
<li>Insert the title as it is if it's a project node</li>
<li>All the proper nouns must be upper-cased</li>
<li>All the other words of the title are lower-cased</li>
<li>The first word is capitalized if it's at the beginning of a sentence</li>
</ul>
<p>
Alright so once that's out of the way, I can get to making it!
</p>
</div>
</div>
<div id="outline-container-org9e81438" class="outline-2">
<h2 id="org9e81438">Version 1</h2>
<div class="outline-text-2" id="text-org9e81438">
<p>
I started by investigating the function that runs when I insert a node. I consulted describe-key for answers. I called the describe-key function (C-h k) and then used the keyboard shortcut to insert a node in org-buffers: (C-c n i). Describe-key reported that org-roam-node-insert is what is run.
</p>

<p>
Reading through the source of the function, we find this intriguing s-expression:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">description</span><span class="w"> </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="nv">region-text</span>
<span class="w">                 </span><span class="p">(</span><span class="nf">org-roam-node-formatted</span><span class="w"> </span><span class="nv">node</span><span class="p">)))</span>
</pre></div>

<p>
This description is used further down as the description (aptly named, huh?) for the link that is inserted at the point:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">insert</span><span class="w"> </span><span class="p">(</span><span class="nf">org-link-make-string</span>
<span class="w">         </span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="s">"id:"</span><span class="w"> </span><span class="nv">id</span><span class="p">)</span>
<span class="w">         </span><span class="nv">description</span><span class="p">))</span>
</pre></div>

<p>
So running (C-h f) with my point on org-roam-node-formatted, I find that this is what is used to create a formatted string for the node. Reading through it, I find org-roam-node-formatter. Running (C-h f) on that…shows funcall? That would mean org-roam-node-formatter is not a function, but a variable! Running (C-h v) on it shows that it's a customizable. Reading the description, it seems to be exactly what I'm looking for.
</p>

<p>
Now I can write some elisp!
</p>

<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">capitalize-words-list</span><span class="w"> </span><span class="c1">;; put all the proper nouns in here</span>
<span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"Emacs"</span><span class="w"> </span><span class="s">"Elisp"</span><span class="w"> </span><span class="s">"GNU"</span><span class="w"> </span><span class="s">"Linux"</span><span class="w"> </span><span class="s">"Python"</span><span class="w"> </span><span class="s">"BeagleBone"</span><span class="w"> </span><span class="s">"Arduino"</span><span class="p">))</span>

<span class="p">(</span><span class="nf">customize-set-variable</span>
<span class="w"> </span><span class="ss">'org-roam-node-formatter</span>
<span class="w"> </span><span class="p">(</span><span class="k">lambda</span>
<span class="w">     </span><span class="p">(</span><span class="nf">node</span><span class="p">)</span>
<span class="w">   </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">sentence-end-regex</span><span class="w"> </span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="s">"[:]</span><span class="se">\\</span><span class="s">{2</span><span class="se">\\</span><span class="s">}</span><span class="se">\\</span><span class="s">|[*-+]</span><span class="se">\\</span><span class="s">b*[</span><span class="se">\n</span><span class="s">]</span><span class="se">\\</span><span class="s">|"</span><span class="w"> </span><span class="p">(</span><span class="nf">sentence-end</span><span class="p">)))</span><span class="w"> </span><span class="c1">;; includes org-headlins, new line after the headline, and bullet points too</span>
<span class="w">         </span><span class="p">(</span><span class="nf">split-title-regex</span><span class="w"> </span><span class="s">"[-=']</span><span class="se">\\</span><span class="s">|[ </span><span class="se">\f\t\n\r\v</span><span class="s">]+"</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="nf">title</span><span class="w"> </span><span class="p">(</span><span class="nf">org-roam-node-title</span><span class="w"> </span><span class="nv">node</span><span class="p">))</span>
<span class="w">         </span><span class="p">(</span><span class="nf">initial-point</span><span class="w"> </span><span class="p">(</span><span class="nf">point</span><span class="p">)))</span>
<span class="w">     </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">member</span><span class="w"> </span><span class="s">"Project"</span><span class="w"> </span><span class="p">(</span><span class="nf">org-roam-node-tags</span><span class="w"> </span><span class="nv">node</span><span class="p">))</span>
<span class="w">         </span><span class="nv">title</span><span class="w"> </span><span class="c1">;; return title as it is</span>

<span class="w">         </span><span class="c1">;; captilize each of the words in the capitalize-words-list</span>
<span class="w">         </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">cased-title</span><span class="w"> </span><span class="p">(</span><span class="nf">mapconcat</span><span class="w"> </span>
<span class="w">                            </span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">(</span><span class="nf">word</span><span class="p">)</span>
<span class="w">                              </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">member</span><span class="w"> </span><span class="nv">word</span><span class="w"> </span><span class="nv">capitalize-words-list</span><span class="p">)</span>
<span class="w">                                  </span><span class="nv">word</span>
<span class="w">                                  </span><span class="p">(</span><span class="nf">downcase</span><span class="w"> </span><span class="nv">word</span><span class="p">)))</span>
<span class="w">                            </span><span class="p">(</span><span class="nf">split-string</span><span class="w"> </span><span class="nv">title</span><span class="w"> </span><span class="nv">split-title-regex</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span><span class="w"> </span><span class="s">""</span><span class="p">))</span>
<span class="w">         </span><span class="c1">;; count the words to the  beginning of last sentence</span>
<span class="w">         </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">words</span><span class="w"> </span><span class="p">(</span><span class="nf">save-excursion</span>
<span class="w">                       </span><span class="p">(</span><span class="nf">re-search-backward</span><span class="w"> </span><span class="nv">sentence-end-regex</span><span class="p">)</span>
<span class="w">                       </span><span class="p">(</span><span class="nf">count-words-region</span><span class="w"> </span><span class="p">(</span><span class="nf">point</span><span class="p">)</span><span class="w"> </span><span class="nv">initial-point</span><span class="p">)))</span><span class="w"> </span>
<span class="w">         </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="nv">words</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">;; if it's at the beginning, captilize the first word</span>
<span class="w">             </span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="p">(</span><span class="nf">capitalize</span><span class="w"> </span><span class="p">(</span><span class="nb">substring</span><span class="w"> </span><span class="nv">cased-title</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">                     </span><span class="p">(</span><span class="nb">substring</span><span class="w"> </span><span class="nv">cased-title</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">length</span><span class="w"> </span><span class="nv">cased-title</span><span class="p">)))</span>
<span class="w">             </span><span class="nv">cased-title</span><span class="p">)))))</span>
</pre></div>

<p>
This snippet works pretty well! Except, split-string consumes the separators. This causes all the words of the title to be squished together. Not aesthetic. Browsing around, I found this nice implementation that does not consume the separators, <a href="https://emacs.stackexchange.com/questions/5729/split-a-string-without-consuming-separators">here</a>. Using that, the case-title becomes 
</p>

<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">cased-title</span><span class="w"> </span><span class="p">(</span><span class="nf">mapconcat</span><span class="w"> </span>
<span class="w">                   </span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">(</span><span class="nf">word</span><span class="p">)</span>
<span class="w">                     </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">member</span><span class="w"> </span><span class="nv">word</span><span class="w"> </span><span class="nv">capitalize-words-list</span><span class="p">)</span>
<span class="w">                         </span><span class="nv">word</span>
<span class="w">                         </span><span class="p">(</span><span class="nf">downcase</span><span class="w"> </span><span class="nv">word</span><span class="p">)))</span>
<span class="w">                   </span><span class="p">(</span><span class="nf">split-string</span><span class="w"> </span><span class="nv">title</span><span class="w"> </span><span class="nv">split-title-regex</span><span class="w"> </span><span class="nv">t</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span><span class="w"> </span><span class="s">""</span><span class="p">))</span>
</pre></div>

<p>
It works! But, there are a few issues present, mainly, there is no way to configure the capitalize-word-list without editing the elisp setq expression. That's what version 2 is for!
</p>
</div>
</div>

<div id="outline-container-org21db0f6" class="outline-2">
<h2 id="org21db0f6">Version 2</h2>
<div class="outline-text-2" id="text-org21db0f6">
<p>
Using Emacs's <a href="https://www.gnu.org/software/emacs/manual/html_node/eintr/defcustom.html">defcustom</a> mechanism, the user can add and remove words as they wish, and take their capitalize-word-list with them! I've written elisp functions for removal and addition of words as well, as I find using the customize interface for a new word take too long. While typing, add-word-at-point-to-list becomes immensely useful to add words on the fly. 
</p>

<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">remove-word-from-list</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">word-to-remove</span><span class="w"> </span><span class="p">(</span><span class="nf">read-string</span><span class="w"> </span><span class="s">"Word to remove: "</span><span class="w"> </span><span class="s">""</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="nv">word-to-remove</span>
<span class="w">      </span><span class="p">(</span><span class="nf">customize-save-variable</span><span class="w"> </span><span class="ss">'capitalize-words-list</span><span class="w"> </span><span class="p">(</span><span class="nb">delete</span><span class="w"> </span><span class="nv">word-to-remove</span><span class="w"> </span><span class="nv">capitalize-words-list</span><span class="p">)))))</span>

<span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">add-word-to-list</span><span class="w"> </span><span class="p">(</span><span class="nf">&amp;optional</span><span class="w"> </span><span class="nv">word-inp</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">word</span><span class="w"> </span><span class="p">(</span><span class="nf">read-string</span><span class="w"> </span><span class="s">"Word selected: "</span><span class="w"> </span><span class="nv">word-inp</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">member</span><span class="w"> </span><span class="nv">word</span><span class="w"> </span><span class="nv">capitalize-words-list</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="nf">message</span><span class="w"> </span><span class="s">"'%s' is already present in the capitalize-word-list."</span><span class="w"> </span><span class="nv">word</span><span class="p">)</span>
<span class="w">      </span><span class="p">(</span><span class="nf">customize-save-variable</span><span class="w"> </span><span class="ss">'capitalize-words-list</span><span class="w"> </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'capitalize-words-list</span><span class="w"> </span><span class="nv">word</span><span class="w"> </span><span class="nv">t</span><span class="p">))</span>
<span class="w">      </span><span class="p">(</span><span class="nf">message</span><span class="w"> </span><span class="s">"Updated and saved word-list!"</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">add-word-at-point-to-list</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">word</span><span class="w"> </span><span class="p">(</span><span class="nf">thing-at-point</span><span class="w"> </span><span class="ss">'word</span><span class="w"> </span><span class="ss">'no-properties</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="nv">word</span>
<span class="w">      </span><span class="p">(</span><span class="nf">add-word-to-list</span><span class="w"> </span><span class="nv">word</span><span class="p">))))</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgced6b09" class="outline-2">
<h2 id="orgced6b09">The Complete Code Listing</h2>
<div class="outline-text-2" id="text-orgced6b09">
<div class="highlight"><pre><span></span><span class="w">  </span><span class="p">(</span><span class="nf">defcustom</span><span class="w"> </span><span class="nv">capitalize-words-list</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"Emacs"</span><span class="w"> </span><span class="s">"Elisp"</span><span class="w"> </span><span class="s">"GNU"</span><span class="w"> </span><span class="s">"Linux"</span><span class="w"> </span><span class="s">"Python"</span><span class="w"> </span><span class="s">"BeagleBone"</span><span class="w"> </span><span class="s">"Arduino"</span><span class="p">)</span>
<span class="w">    </span><span class="s">"If non-nil, contains a list of proper-nouns, abbreviations, and other words to be capitalized when</span>
<span class="s">  org-roam-insert is called. The case does matter for this, so be careful when adding own words."</span>
<span class="w">    </span><span class="nv">:type</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="nv">repeat</span><span class="w"> </span><span class="nb">string</span><span class="p">))</span>

<span class="c1">;; https://emacs.stackexchange.com/questions/5729/split-a-string-without-consuming-separators</span>
<span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">split-string</span><span class="w"> </span><span class="p">(</span><span class="nb">string</span><span class="w"> </span><span class="nv">&amp;optional</span><span class="w"> </span><span class="nv">separators</span><span class="w"> </span><span class="nv">omit-nulls</span><span class="w"> </span><span class="nv">keep-sep</span><span class="p">)</span>
<span class="w">      </span><span class="s">"Split STRING into substrings bounded by matches for SEPARATORS."</span>
<span class="w">      </span><span class="p">(</span><span class="k">let*</span><span class="w"> </span><span class="p">((</span><span class="nf">keep-nulls</span><span class="w"> </span><span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="nv">separators</span><span class="w"> </span><span class="nv">omit-nulls</span><span class="w"> </span><span class="nv">t</span><span class="p">)))</span>
<span class="w">             </span><span class="p">(</span><span class="nf">rexp</span><span class="w"> </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="nv">separators</span><span class="w"> </span><span class="nv">split-string-default-separators</span><span class="p">))</span>
<span class="w">             </span><span class="p">(</span><span class="nf">start</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">             </span><span class="nv">this-start</span><span class="w"> </span><span class="nv">this-end</span>
<span class="w">             </span><span class="nv">notfirst</span>
<span class="w">             </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>
<span class="w">             </span><span class="p">(</span><span class="nf">push-one</span>
<span class="w">              </span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">()</span>
<span class="w">                </span><span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="nv">keep-nulls</span><span class="w"> </span><span class="p">(</span><span class="nb">&lt;</span><span class="w"> </span><span class="nv">this-start</span><span class="w"> </span><span class="nv">this-end</span><span class="p">))</span>
<span class="w">                  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">this</span><span class="w"> </span><span class="p">(</span><span class="nb">substring</span><span class="w"> </span><span class="nb">string</span><span class="w"> </span><span class="nv">this-start</span><span class="w"> </span><span class="nv">this-end</span><span class="p">)))</span>
<span class="w">                    </span><span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="nv">keep-nulls</span><span class="w"> </span><span class="p">(</span><span class="nb">&gt;</span><span class="w"> </span><span class="p">(</span><span class="nb">length</span><span class="w"> </span><span class="nv">this</span><span class="p">)</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="w">                      </span><span class="p">(</span><span class="nf">push</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nb">list</span><span class="p">)))))))</span>
<span class="w">        </span><span class="p">(</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="k">and</span><span class="w"> </span><span class="p">(</span><span class="nf">string-match</span>
<span class="w">                     </span><span class="nv">rexp</span><span class="w"> </span><span class="nb">string</span>
<span class="w">                     </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">and</span><span class="w"> </span><span class="nv">notfirst</span>
<span class="w">                              </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="p">(</span><span class="nf">match-beginning</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="w">                              </span><span class="p">(</span><span class="nb">&lt;</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="p">(</span><span class="nb">length</span><span class="w"> </span><span class="nb">string</span><span class="p">)))</span>
<span class="w">                         </span><span class="p">(</span><span class="nb">1+</span><span class="w"> </span><span class="nv">start</span><span class="p">)</span><span class="w"> </span><span class="nv">start</span><span class="p">))</span>
<span class="w">                    </span><span class="p">(</span><span class="nb">&lt;</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="p">(</span><span class="nb">length</span><span class="w"> </span><span class="nb">string</span><span class="p">)))</span>
<span class="w">          </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">notfirst</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">this-start</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">this-end</span><span class="w"> </span><span class="p">(</span><span class="nf">match-beginning</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">                </span><span class="nv">start</span><span class="w"> </span><span class="p">(</span><span class="nf">match-end</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="w">          </span><span class="p">(</span><span class="nf">funcall</span><span class="w"> </span><span class="nv">push-one</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="nv">keep-sep</span>
<span class="w">            </span><span class="p">(</span><span class="nf">push</span><span class="w"> </span><span class="p">(</span><span class="nf">match-string</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nb">string</span><span class="p">)</span><span class="w"> </span><span class="nb">list</span><span class="p">)))</span>
<span class="w">        </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">this-start</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">this-end</span><span class="w"> </span><span class="p">(</span><span class="nb">length</span><span class="w"> </span><span class="nb">string</span><span class="p">))</span>
<span class="w">        </span><span class="p">(</span><span class="nf">funcall</span><span class="w"> </span><span class="nv">push-one</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="nf">nreverse</span><span class="w"> </span><span class="nb">list</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">customize-set-variable</span>
<span class="w"> </span><span class="ss">'org-roam-node-formatter</span>
<span class="w"> </span><span class="p">(</span><span class="k">lambda</span>
<span class="w">   </span><span class="p">(</span><span class="nf">node</span><span class="p">)</span>
<span class="w">   </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">sentence-end-regex</span><span class="w"> </span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="s">"[:]</span><span class="se">\\</span><span class="s">{2</span><span class="se">\\</span><span class="s">}</span><span class="se">\\</span><span class="s">|[*-+]</span><span class="se">\\</span><span class="s">b*[</span><span class="se">\n</span><span class="s">]</span><span class="se">\\</span><span class="s">|"</span><span class="w"> </span><span class="p">(</span><span class="nf">sentence-end</span><span class="p">)))</span>
<span class="w">         </span><span class="p">(</span><span class="nf">split-title-regex</span><span class="w"> </span><span class="s">"[-='/()]</span><span class="se">\\</span><span class="s">|[ </span><span class="se">\f\t\n\r\v</span><span class="s">]+"</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="nf">title</span><span class="w"> </span><span class="p">(</span><span class="nf">org-roam-node-title</span><span class="w"> </span><span class="nv">node</span><span class="p">))</span>
<span class="w">         </span><span class="p">(</span><span class="nf">initial-point</span><span class="w"> </span><span class="p">(</span><span class="nf">point</span><span class="p">)))</span>
<span class="w">     </span><span class="p">(</span><span class="k">cond</span><span class="w"> </span><span class="p">((</span><span class="nb">member</span><span class="w"> </span><span class="s">"Project"</span><span class="w"> </span><span class="p">(</span><span class="nf">org-roam-node-tags</span><span class="w"> </span><span class="nv">node</span><span class="p">))</span><span class="w"> </span><span class="nv">title</span><span class="p">)</span><span class="w"> </span><span class="c1">;; return title as it is</span>
<span class="w">           </span><span class="c1">;; add specific cases here (like the above)</span>
<span class="w">           </span><span class="p">((</span><span class="nf">org-at-heading-p</span><span class="p">)</span><span class="w"> </span><span class="nv">title</span><span class="p">)</span><span class="w"> </span><span class="c1">;; at an org-headline, so return as it is</span>
<span class="w">           </span><span class="p">(</span><span class="nf">t</span><span class="w"> </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">cased-title</span><span class="w"> </span><span class="p">(</span><span class="nf">mapconcat</span><span class="w"> </span><span class="c1">;; capitalize only the proper nouns</span>
<span class="w">                                 </span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">(</span><span class="nf">word</span><span class="p">)</span>
<span class="w">                                   </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">member</span><span class="w"> </span><span class="nv">word</span><span class="w"> </span><span class="nv">capitalize-words-list</span><span class="p">)</span><span class="w"> </span><span class="c1">;; assumes that the word is capitalized properly in the title</span>
<span class="w">                                       </span><span class="nv">word</span>
<span class="w">                                     </span><span class="p">(</span><span class="nf">downcase</span><span class="w"> </span><span class="nv">word</span><span class="p">)))</span>
<span class="w">                                 </span><span class="p">(</span><span class="nf">split-string</span><span class="w"> </span><span class="nv">title</span><span class="w"> </span><span class="nv">split-title-regex</span><span class="w"> </span><span class="nv">t</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span><span class="w"> </span><span class="s">""</span><span class="p">))</span>
<span class="w">              </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">words</span><span class="w"> </span><span class="p">(</span><span class="nf">save-excursion</span>
<span class="w">                            </span><span class="p">(</span><span class="nf">re-search-backward</span><span class="w"> </span><span class="nv">sentence-end-regex</span><span class="p">)</span>
<span class="w">                            </span><span class="p">(</span><span class="nf">count-words-region</span><span class="w"> </span><span class="p">(</span><span class="nf">point</span><span class="p">)</span><span class="w"> </span><span class="nv">initial-point</span><span class="p">)))</span>
<span class="w">              </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="nv">words</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">;; at the beginning of a sentence, so make sure the first word is capitalized</span>
<span class="w">                  </span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="p">(</span><span class="nf">capitalize</span><span class="w"> </span><span class="p">(</span><span class="nb">substring</span><span class="w"> </span><span class="nv">cased-title</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">                          </span><span class="p">(</span><span class="nb">substring</span><span class="w"> </span><span class="nv">cased-title</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">length</span><span class="w"> </span><span class="nv">cased-title</span><span class="p">)))</span>
<span class="w">                </span><span class="nv">cased-title</span><span class="p">))))))</span>

<span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">remove-word-from-list</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="s">"Removes a word from the capitalize-words-list. Which word to be removed will be prompted at the mini-buffer."</span>
<span class="w">  </span><span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">word-to-remove</span><span class="w"> </span><span class="p">(</span><span class="nf">read-string</span><span class="w"> </span><span class="s">"Word to remove: "</span><span class="w"> </span><span class="s">""</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="nv">word-to-remove</span>
<span class="w">      </span><span class="p">(</span><span class="nf">customize-save-variable</span><span class="w"> </span><span class="ss">'capitalize-words-list</span><span class="w"> </span><span class="p">(</span><span class="nb">delete</span><span class="w"> </span><span class="nv">word-to-remove</span><span class="w"> </span><span class="nv">capitalize-words-list</span><span class="p">)))))</span>

<span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">add-word-to-list</span><span class="w"> </span><span class="p">(</span><span class="nf">&amp;optional</span><span class="w"> </span><span class="nv">word-inp</span><span class="p">)</span>
<span class="w">  </span><span class="s">"Adds a word to the capitalize-words-list, if not present."</span>
<span class="w">  </span><span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">word</span><span class="w"> </span><span class="p">(</span><span class="nf">read-string</span><span class="w"> </span><span class="s">"Word selected: "</span><span class="w"> </span><span class="nv">word-inp</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">member</span><span class="w"> </span><span class="nv">word</span><span class="w"> </span><span class="nv">capitalize-words-list</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="nf">message</span><span class="w"> </span><span class="s">"'%s' is already present in the capitalize-word-list."</span><span class="w"> </span><span class="nv">word</span><span class="p">)</span>
<span class="w">      </span><span class="p">(</span><span class="nf">customize-save-variable</span><span class="w"> </span><span class="ss">'capitalize-words-list</span><span class="w"> </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'capitalize-words-list</span><span class="w"> </span><span class="nv">word</span><span class="w"> </span><span class="nv">t</span><span class="p">))</span>
<span class="w">      </span><span class="p">(</span><span class="nf">message</span><span class="w"> </span><span class="s">"Updated and saved word-list!"</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">add-word-at-point-to-list</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="s">"Adds a word under the point to the capitalize-words-list, if not present."</span>
<span class="w">  </span><span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">word</span><span class="w"> </span><span class="p">(</span><span class="nf">thing-at-point</span><span class="w"> </span><span class="ss">'word</span><span class="w"> </span><span class="ss">'no-properties</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="nv">word</span>
<span class="w">      </span><span class="p">(</span><span class="nf">add-word-to-list</span><span class="w"> </span><span class="nv">word</span><span class="p">))))</span>
</pre></div>
</div>
</div>

<div id="outline-container-org1e63987" class="outline-2">
<h2 id="org1e63987">Conclusion…or is it?</h2>
<div class="outline-text-2" id="text-org1e63987">
<p>
I have noticed a few areas that I can improve version 2,
</p>
<ul class="org-ul">
<li>A different way to tell if we're at the beginning of a "sentence" instead of counting words</li>
<li>If you insert a link between the end of a sentence and another word, the first word won't be capitalized properly.</li>
</ul>
<p>
These don't impede my usage as those cases are very less. But it is a scope of improvement. So watch <a href="https://gitlab.com/-/snippets/2567491">this</a> space for an updated version when I go about doing that! That's all y'all. 
</p>
</div>
</div>
    </section><aside class="postpromonav"><nav><ul class="pager hidden-print pagination">
<li class="next" id="next-post">
                <a class="hover:pagination__link" href="../setting-up-usb-ethernet-network-connection-bw-beaglebone-and-linux/" rel="next" title="Setting up USB-Ethernet Network Connection between BeagleBone Boards and Desktop Linux">Next post  → </a>
            </li>
        </ul></nav></aside></article></main><footer class="article__meta footer"><div>
          <p class="footer-content">
Contents by <a href="../../contact">ru2saig</a> - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a>

</p>
<div class="license">
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="../../images/cc-88x31.png"></a>
</div>


	</div>
	<div>
          
	</div>
        </footer>
</div>
    </div>
                <script src="../../assets/js/index.js"></script><script src="../../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
