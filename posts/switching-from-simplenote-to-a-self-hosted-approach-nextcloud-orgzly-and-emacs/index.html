<!DOCTYPE html>
<html prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Switching from Simplenote to a Self-Hosted Approach (Nextcloud, Orgzly and Emacs) | ru2saig</title>
<link href="../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/index.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/custom.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://ru2saig.github.io/posts/switching-from-simplenote-to-a-self-hosted-approach-nextcloud-orgzly-and-emacs/">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&amp;display=swap" rel="stylesheet">
<link rel="/icon" href="//favicon.ico" sizes="32x32">
<!--[if lt IE 9]><script src="../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><meta name="author" content="ru2saig">
<link rel="prev" href="../setting-up-usb-ethernet-network-connection-bw-beaglebone-and-linux/" title="Setting up USB-Ethernet Network Connection between BeagleBone Boards and Desktop Linux" type="text/html">
<meta property="og:site_name" content="ru2saig">
<meta property="og:title" content="Switching from Simplenote to a Self-Hosted Approach (Nextcloud, Orgzly">
<meta property="og:url" content="https://ru2saig.github.io/posts/switching-from-simplenote-to-a-self-hosted-approach-nextcloud-orgzly-and-emacs/">
<meta property="og:description" content='Note-taking, defined by Wikipedia is the "practice of recording information from different sources and platforms. By taking notes, the writer records the essence of the information, freeing their mind'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-08-27T21:30:00+05:30">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="org-mode">
<meta property="article:tag" content="self-hosted">
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
    <input id="dark-mode" type="checkbox"><div class="theme">
        <div class="layout">
              <header class="cover"><h1 id="brand" class="cover__title">
<a href="../../" title="ru2saig" rel="home">
      <span id="blog-title">ru2saig</span>
  </a>
  <label class="dark-mode-label hover:dark-mode-label" for="dark-mode">
    <?xml version="1.0" encoding="UTF-8" standalone="no"?><!-- Generator: Gravit.io --><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation: isolate;" viewbox="0 0 416 416" width="30px" height="30px"><defs><clippath id="_clipPath_qEPwrMg7OPn6mDBNPkG6Nqc7qffgU4IC"><rect width="416" height="416"></rect></clippath></defs><g clip-path="url(#_clipPath_qEPwrMg7OPn6mDBNPkG6Nqc7qffgU4IC)"><path d=" M 304 88 C 304 57.38 299.49 26.39 288 0 C 364.43 33.27 416 111.32 416 200 C 416 319.29 319.29 416 200 416 C 111.32 416 33.27 364.43 0 288 C 26.39 299.49 57.38 304 88 304 C 207.29 304 304 207.29 304 88 Z "></path></g></svg></label>

  </h1>
  <span id="blog-desc">Adventures in Robotics, Emacs, Art and more</span>

       <div>
     <nav class="nav-menu"><ul class="navigation">
<li><a href="../../">Blog</a></li>
                <li><a href="../../projects/">Projects</a></li>
                <li><a href="../../about/">About</a></li>
                <li><a href="../../categories/">Categories</a></li>
                <li><a href="../../archive/">Archive</a></li>
                <li><a href="../../rss.xml">RSS feed</a></li>

	 
	 
	 
       </ul></nav>
</div>


  </header><main id="content" class="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title header__title" itemprop="headline name">Switching from Simplenote to a Self-Hosted Approach (Nextcloud, Orgzly and Emacs)</h1>

        <div class="metadata">
            <span class="byline author vcard p-author h-card">
		Tags:
            </span>
                <a class="tag p-category article__meta__link hover:article__meta__link" href="../../categories/linux/" rel="tag">#linux </a>
                <a class="tag p-category article__meta__link hover:article__meta__link" href="../../categories/org-mode/" rel="tag">#org-mode </a>
                <a class="tag p-category article__meta__link hover:article__meta__link" href="../../categories/self-hosted/" rel="tag">#self-hosted </a>
            <span class="dateline">
              | <a class="article__meta__link hover:article__meta__link" href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-08-27T21:30:00+05:30" itemprop="datePublished" title="27-Aug-2023">27-Aug-2023</time></a>
            </span>
                    | <span class="sourceline"><a class="article__meta__link hover:article__meta__link" href="index.org">Source</a></span>

        </div>
        
    </header><section class="e-content entry-content" itemprop="articleBody text"><p>
Note-taking, defined by <a href="https://en.wikipedia.org/wiki/Note-taking">Wikipedia</a> is the "practice of recording information from different sources and platforms. By taking notes, the writer records the essence of the information, freeing their mind from having to recall everything." I use a note app to jot down quick ideas, write down tasks that come up, save a list of resources, store my "bookmarks" and to journal. For knowledge-management, I use org-roam, but that discussion will be for another time. Since I usually have my phone at hand, I used to use <a href="https://simplenote.com/">Simplenote</a>. The web-app was suitable to access my notes from my laptop. But recently syncing stopped working. I realized how ingrained that app was to my day-to-day activities, and I rather have something like that hosted on my small home-server setup in-case of hiccups like that. But since that required effort, I did the usual thing of updating to the latest version of the app, installing the AppImage from FlatHub, to little or no avail. Now I realized I had to put some effort, so I spent the evening doing some light research on what self-hosted options are out there, and arrived at a nice setup using <a href="https://nextcloud.com/">NextCloud</a>, <a href="https://orgzly.com/">Orgzly</a> and <a href="https://www.gnu.org/software/emacs/">Emacs</a>.
</p>

<div id="outline-container-orgc77bee0" class="outline-2">
<h2 id="orgc77bee0">Why those in Particular?</h2>
<div class="outline-text-2" id="text-orgc77bee0">
<p>
Considering that self-hosting was not possible<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup>, I started looking into building a system for myself from "scratch". I got used to the org markup language and found myself using it in Simplenote, even if Simplenote didn't support it back then. So I figured to look into solution that will let me use org markup. Starting with mobile solutions (since I've got Emacs on my laptop<sup><a id="fnr.2" class="footref" href="#fn.2" role="doc-backlink">2</a></sup>, anyway. You can't beat that for org markup) I found Orgzly. I then needed some way to sync my notes between my phone and any other devices I use, namely, my laptop. I found, after reading through the Orgzly <a href="https://www.orgzly.com/docs#synchronization">docs</a> on the topic, it has support for this nifty thing called <a href="https://developer.mozilla.org/en-US/docs/Glossary/WebDAV">WebDAV</a>, which it additionally mentioned that Nextcloud had support for it. Having heard great things about NextCloud, I decided on that. For actually accessing the Nextcloud instance on my home-server from my laptop and phone, I use <a href="https://tailscale.com/">Tailscale</a>. It is a WireGaurd-based VPN that is dead easy to get up and going, and I've used it extensively for accessing systems without having to deal with port-forwarding. Alright, now onto the setup!
</p>
</div>
</div>

<div id="outline-container-org2a5108e" class="outline-2">
<h2 id="org2a5108e">Setting Nextcloud up on my Server</h2>
<div class="outline-text-2" id="text-org2a5108e">
<p>
My "home-server" is an Itona TC6727 thin-client running a minimal installation of Debian 12. I use docker to manage other services, mainly <a href="https://github.com/Kareadita/Kavita">Kavita</a> and <a href="https://www.openproject.org/">OpenProject</a>. Reading through the README for <a href="https://github.com/nextcloud/docker#base-version---apache">docker</a> image for Nextcloud, I settled on using the following docker-compose.yml:
</p>

<div class="highlight"><pre><span></span>version: '2'

volumes:
  nextcloud:
  db:

services:
  db:
    image: mariadb:10.6
    restart: always
    command: --transaction-isolation=READ-COMMITTED --log-bin=binlog --binlog-format=ROW
    volumes:
      - db:/var/lib/mysql
    environment:
      - MYSQL_ROOT_PASSWORD=mystrongrootpw
      - MYSQL_PASSWORD=mystrongsqlpw
      - MYSQL_DATABASE=nextcloud
      - MYSQL_USER=nextcloud

  app:
    image: nextcloud
    restart: always
    ports:
      - 8081:80
    links:
      - db
    volumes:
      - nextcloud:/var/www/html
    environment:
      - MYSQL_PASSWORD=mystrongsqlpw
      - MYSQL_DATABASE=nextcloud
      - MYSQL_USER=nextcloud
      - MYSQL_HOST=db
</pre></div>

<p>
Using a docker-compose up -d, I had Nextcloud running on port 8081 on my server. After setting up an admin account, I proceeded to setting up the clients:
</p>
</div>
</div>

<div id="outline-container-org168fe6f" class="outline-2">
<h2 id="org168fe6f">Setting Orgzly on my Phone</h2>
<div class="outline-text-2" id="text-org168fe6f">
<p>
I run Android, so I installed Orgzly using the <a href="https://f-droid.org/en/">F-Droid</a> client. I then went over to my new Nextcloud instance and created a folder called "Nextnote" to store all the incoming notes. Referencing this setup from <a href="https://itcamefromtheinternet.com/blog/how-to-setup-nextcloud-syncthing/#step-6-verify-gui-access">itcamefromtheinternet</a>, I found the WebDAV sharing link for my Nextcloud instance under Files Settings &gt; WebDAV. In Orgzly, under Settings &gt; Sync &gt; Repositories I pasted the url provided by NextCloud and added /Nextnote / to the end of the url. After logging in, I was good to go. Under Settings &gt; Sync &gt; Auto-Sync I enabled all that I could enable. Now, I moved onto my laptop:
</p>
</div>
</div>

<div id="outline-container-orgfcd6905" class="outline-2">
<h2 id="orgfcd6905">Setting up Nextcloud Client on my Laptop</h2>
<div class="outline-text-2" id="text-orgfcd6905">
<p>
After reading through <a href="https://docs.nextcloud.com/server/latest/user_manual/en/files/access_webdav.html">Aceessing Nextcloud files using WebDAV</a> page on the Nextcloud docs, I decided to just try the official desktop client after unsuccessfully trying out the command-line method<sup><a id="fnr.3" class="footref" href="#fn.3" role="doc-backlink">3</a></sup>. It was available from the Fedora repos so an install later I had it running with a nice indicator in my panel. After logging in with the GUI, I configured the sync folders. I added a hello-world.org file and after manually syncing, it showed up under Orgzly! I did a little "hello" message for kicks, and proceeded for the main event: getting all my notes from Simplenote into Nextnote.
</p>

<p>
From the Simplenote web-app, I was able to export them all as text files compressed in zip format. After thinking for a bit, I decided to just change the extension from .txt to .org and figured that would work well enough. I used this script in order to do that, run in the extracted directory:
</p>

<div class="highlight"><pre><span></span><span class="ch">#!/bin/env bash</span>

find<span class="w"> </span>.<span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">1</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">"*.txt"</span><span class="w"> </span>-exec<span class="w"> </span>basename<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>filename<span class="p">;</span>
<span class="k">do</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">"Processing </span><span class="si">${</span><span class="nv">filename</span><span class="si">}</span><span class="s2">"</span>
cp<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">filename</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="s2">"/home/ruusaig/Nextcloud/Nextnote/</span><span class="si">${</span><span class="nv">filename</span><span class="p">%.*</span><span class="si">}</span><span class="s2">.org"</span>
<span class="k">done</span>
</pre></div>

<p>
After syncing, everything started showing up under Orgzly. But wait! Some of my notes, I used stars to indicate bullet points. As anyone who uses org Markdown knows, stars are headings. And Orgzly treats each of those as a "note" and the file they are in as a "notebook". This caused some "notebooks" to be very hard to read. Since there weren't many files like this, I manually replaced the stars with bullet-points using the Emacs replace functions. Some of my older notes from Simplenote had carriage-return characters everywhere, these ^M things. I just replaced them with spaces: everything still looked fine afterwards.
</p>

<p>
I used to keep track of things in Simplenote by using headings of the form of dd/mm/yy: with content underneath. In Orgzly, this didn't show up as headings, as they weren't actually headings. I wanted headings! So using regexp-replace, I made them into headings with [0-9]*/[0-9]*/[0-9]*: → * \&amp;. The "\&amp;" is what was matched, and can be used in the replacement text. I found that pretty neat. Emacs ftw. 
</p>
</div>
</div>

<div id="outline-container-orgc51dfdb" class="outline-2">
<h2 id="orgc51dfdb">Conclusion</h2>
<div class="outline-text-2" id="text-orgc51dfdb">
<p>
After using this setup for a few weeks, I found myself very happy with it! Setup was fast, easy and simple, and sync works great! Of course, if you are just looking for a note-taking solution, Orgzly is a great choice on mobile. But if you want cross-platform sync, I recommend you have a look at what I've here, and try it out or something similar! You could substitute Nextcloud with something like Dropbox or even try just using a Syncthing, thing. If you don't have a thin-client handy, you could just host your notes out of your laptop or desktop computer under a VPN, so only selected devices can connect and access them. But if you can spare the money, try setting up a nice home server for yourself and family. Thinclients and NUCs are pretty cheap, a Raspberry Pi has also proven to be great for this sort of thing, and more. I highly suggest you to choose open, privacy and user-friendly solutions for your data whenever you can. Self-host and embrace the power! Until we meet again.
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef">
<sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup><div class="footpara" role="doc-footnote"><p class="footpara">
See this post on the forum: <a href="https://forums.simplenote.com/forums/topic/customized-simplenote-for-self-hosting/">https://forums.simplenote.com/forums/topic/customized-simplenote-for-self-hosting/</a>
</p></div>
</div>

<div class="footdef">
<sup><a id="fn.2" class="footnum" href="#fnr.2" role="doc-backlink">2</a></sup><div class="footpara" role="doc-footnote"><p class="footpara">
Yes I know that there is a working Android port of Emacs. But I found that Orgzly had less configuration to get going. Perhaps I will revisit this post using the Android port and a custom Emacs config for it…
</p></div>
</div>

<div class="footdef">
<sup><a id="fn.3" class="footnum" href="#fnr.3" role="doc-backlink">3</a></sup><div class="footpara" role="doc-footnote"><p class="footpara">
I did get it working, but it was too slow, as in typing in the file in Emacs was very laggy. I don't know if this was Emacs, or the fact that it was mounted as a davfs
</p></div>
</div>


</div>
</div>
    </section><aside class="postpromonav"><nav><ul class="pager hidden-print pagination">
<li class="previous">
                <a class="hover:pagination__link" href="../setting-up-usb-ethernet-network-connection-bw-beaglebone-and-linux/" rel="prev" title="Setting up USB-Ethernet Network Connection between BeagleBone Boards and Desktop Linux"> ← Previous post</a>
            </li>
        </ul></nav></aside></article></main><footer class="article__meta footer"><div>
          <p class="footer-content">
Contents © 2024
<a href="mailto:develruusaig@gmail.com">ru2saig</a> - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a>

</p>
<div class="license">
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="../../images/cc-88x31.png"></a>
</div>


	</div>
	<div>
          
	</div>
        </footer>
</div>
    </div>
                <script src="../../assets/js/index.js"></script><script src="../../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
